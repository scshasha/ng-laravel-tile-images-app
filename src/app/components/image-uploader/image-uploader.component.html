
<app-header (selectedlayout)="toggleTemplates($event)" (uploadimage)="uploadFiles()" ng-class="mat-elevation-z6"></app-header>
<div class="container-fluid">
	<div class="row">
		<div class="container">
			<div [ngClass]="gridHacks()" id="my-material-grid-list-hack-of-shame" class="grid-list m-auto" *ngIf="this.templateGrids.length > 0">
				<!-- // Loop through the selecetd gid layout settings -->
				<div class="grid-item" *ngFor="grid of templateGrids; let j = index;">
					<div class="grid-item-header">
						<div> 
						  <span>{{ (selectedfileTitle(j) == null) ? "Pick file":selectedfileTitle(j) }}</span>
						  <input type="file" name="file-picker-{{ j }}" (change)="onSelect($event, j)" />
						</div>
					</div>
					<div class="progress" *ngIf="isUploadingStatus(j)">
					  <div class="progress-bar" role="progressbar" [style.width.%]="this.files[j].progress" aria-valuemin="0" aria-valuemax="100">

					  {{ (this.files[j].uploaded != true) ? 'Uploading image... (' + this.files[j].progress + '%)' : 'Image uploaded! (' + this.files[j].progress + '%)' }}

					</div>
					</div>
					<!-- //#end grid-item-header -->
					<img [src]="previewSrc(j)" alt="image-preview" ngDraggable  ngResizable [rzHandles]="'n,e,s,w,se,sw,ne,nw'"/>
					
					<!-- //#end grid-item-footer -->
				</div>
				<!-- //#end grid-item -->
			</div>
			<!-- //#end grid-list -->
		</div>
	</div>

	<div class="row">
		<div class="container" *ngIf="(this.uploadedFiles[0])">
			<h3 class="font-weight-light text-center mt-4 mb-0">Recent Uploads</h3>
			<hr class="mt-2 mb-5 w-100" />
			<div class="row text-center">
				<div class="col-lg-3 col-md-4 col-6" *ngFor="item of this.uploadedFiles; let x = index;">
					<a href="#" class="d-block mb-4 h-100">
						<img class="img-fluid img-thumbnail" [src]="this.base_url+'/'+uploadedFiles[x].image" alt="" />
					</a>
				</div>
			</div>
		</div>
	</div>
</div>

<app-footer></app-footer>